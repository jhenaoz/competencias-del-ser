<div class="main">
    <p *ngIf="!selectSurvey" class="text-center title">{{ "Survey-options.title-one" | translate}}</p>
    <p *ngIf="selectSurvey" class="text-center title">{{ "Survey-options.title-all" | translate}}</p>
    <hr>
    <p class="description">
        {{ "Survey-options.description" | translate}}
        <br><br> {{ "Survey-options.information" | translate}}
    </p>

    <div class="container">
        <form [formGroup]="complexForm" (ngSubmit)="submitForm(complexForm.value)">
            <!--Evaluated select-->
            <div class="block">
                <label for="evaluatedSelect"><span style="color: #134C96">*</span> 
                {{ "Survey-options.evaluated" | translate}}</label>
                <app-employee id="evaluatedAppEmployee" [formControl]="evaluated" ngDefaultControl>
                </app-employee>
                <!--Validator label-->
                <div class="alert alert-danger" *ngIf="(complexForm.controls.evaluated.invalid && complexForm.controls.evaluated.dirty)">You must select someone.</div>
            </div>

            <!--Relationship select-->
            <div class="block">
                <label for="relationshipSelect"><span style="color: #134C96">*</span> 
                {{ "Survey-options.relationship" | translate}}</label>
                <select class="form-control" id="relationshipSelect" title="relationshipSelect" [formControl]="complexForm.controls['relationship']" [(ngModel)]="relationshipType" (change)="relationChanges()">
                  <option></option>
                  <option id="team">{{ "Survey-options.relation-teammate" | translate}}</option>
                  <option id="client">{{ "Survey-options.relation-client" | translate}}</option>                  
                  <option id="own">{{ "Survey-options.relation-own" | translate}}</option>
                </select>
                <!--Validator label-->
                <div class="alert alert-danger" *ngIf="!complexForm.controls['relationship'].valid  && complexForm.controls['relationship'].dirty">You must select a relation.</div>
            </div>
            <!--Popover-->
            <a rel="popover" data-toggle="popover" data-placement="left" data-trigger="hover" data-popover-content="#myPopover"><img src="assets/images/see-more.png"></a>

            <!--Evaluator select-->
            <div class="block" id="evaluatorBlock">
                <label for="evaluatorSelect"><span style="color: #134C96">*</span> 
                {{ "Survey-options.evaluator" | translate}}</label>
                <input type="text" class="form-control" id="evaluatorAppEmployeeText" class="form-control hide" [formControl]="complexForm.controls['evaluator']">
                <app-employee id="evaluatorAppEmployee" [formControl]="complexForm.controls['evaluator']" ngDefaultControl>
                </app-employee>
                <!--Validator label-->
                <div class="alert alert-danger" *ngIf="!complexForm.controls['evaluator'].valid && complexForm.controls['relationship']!='own'">You must select someone.</div>
            </div>

            <!--Competence select-->
            <div *ngIf="!selectSurvey" class="block">
                <label for="competencesSelect"><span style="color: #134C96">*</span> 
                {{ "Competences.title" | translate}}</label>
                <select class="form-control" id="competencesSelect" [formControl]="complexForm.controls['competenceToEvaluate']">
                    <option></option>
                    <option>{{ "Competences.competence-opening" | translate}}</option>
                    <option>{{ "Competences.competence-communication" | translate}}</option>
                    <option>{{ "Competences.competence-initiative" | translate}}</option>
                    <option>{{ "Competences.competence-client-orientation" | translate}}</option>
                    <option>{{ "Competences.competence-goals" | translate}}</option>
                    <option>{{ "Competences.competence-teamwork" | translate}}</option>
                    <option>{{ "Competences.competence-development" | translate}}</option>
                    <option>{{ "Competences.competence-goal" | translate}}</option>
                </select>
                <!--Validator label-->
                <div class="alert alert-danger" *ngIf="complexForm.controls['competenceToEvaluate'].invalid && complexForm.controls['competenceToEvaluate'].dirty">You must select a competence.</div>
            </div>
            <button type="submit" class="btn btn-default" [disabled]="!complexForm.valid">Submit</button>
        </form>

    </div>

    <!--Popover content-->
    <div class="hide" id="myPopover">
        <h4>{{ "Survey-options.relation-teammate" | translate}}</h4>
        <p>
            {{ "Survey-options.relation-teammate-description" | translate}}
        </p>
        <h4>{{ "Survey-options.relation-client" | translate}}</h4>
        <p>
            {{ "Survey-options.relation-client-description" | translate}}
        </p>
        <h4>{{ "Survey-options.relation-own" | translate}}</h4>
        <p>
            {{ "Survey-options.relation-own-description" | translate}}
        </p>
    </div>
</div>
<app-footer (startNewSurvey)="startSurvey()" ></app-footer>